(window["webpackJsonp-ae-fe/cosmos-1"]=window["webpackJsonp-ae-fe/cosmos-1"]||[]).push([[36],{1263:function(e,n,t){"use strict";t.r(n);var o=t(4),i=t.n(o),r=t(0),a=t.n(r),p=t(2),l=t.n(p),c=t(7),s=t(6),u=t(36);var d=function(){var e,n,t;return n=null===(e=window)||void 0===e?void 0:e._pop_service_percent_,(t=c.a.get("xman_us_f","acs_rt")||"")&&n&&!(n<=0)&&(n>=1||parseInt(t.slice(t.length-2,t.length),16)/256<=n)?"us":"cn"},y=function(){var e=a()(l.a.mark((function e(n,t,o){var i,r,a,p,y,g,v,_,f,m,b,x,w;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t="pc"),!o){e.next=1;break}return e.abrupt("return",new Promise((function(e,n){e({data:{popLayerRuleMap:null==o?void 0:o.popLayerRuleMap}})})));case 1:return y=c.a.get("aep_usuc_f","b_locale"),g=c.a.getRegion(),v=y&&(null==y||null===(i=y.split("_"))||void 0===i?void 0:i[0])+"_"+g,_=c.a.getCurrency(),f=c.a.get("xman_us_f","acs_rt"),m=c.a.get("xman_us_f","x_as_i"),v="en_CN"===v?"en_US":v,b=s.util.awsc,e.next=2,b.init();case 2:return e.next=3,b.getUA();case 3:return x=e.sent,e.next=4,b.getUmidToken();case 4:return w=e.sent,window.fyOBJ=void 0,window.AWSC.configFYEx((function(e){window.fyOBJ=e}),{location:d()||"cn",MaxMTLog:5,MaxKSLog:5,MaxFocusLog:5,MaxNGPLog:5},3e3),e.abrupt("return",u.a.request({type:"POST",api:"mtop.aliexpress.usertouch.poplayer.get",v:"2.0",appKey:"24815441",data:{_currency:_,_lang:v,clientType:t,positionSign:n,ua:x,umidToken:w,ext:JSON.stringify({pullTrafficRuleParam:{originalUrl:null===(r=window)||void 0===r||null===(a=r.location)||void 0===a?void 0:a.href,appAffiParameters:decodeURIComponent(m||"")||"",acsRt:f,referUrl:null===(p=document)||void 0===p?void 0:p.referrer}})}}));case 5:case"end":return e.stop()}}),e)})));return function(n,t,o){return e.apply(this,arguments)}}(),g=t(362),v=t(506),_=t(245),f=t(1226),m=function(){return"postMessage"in window};function b(e,n,t){var o=document.createElement("iframe");return o.src=Object(v.b)(e,{__poplayer_preserve_uuid:n,__prefix:_.b.__prefix||"",__poplayer_position_sign:t}),o.name=n,o.style.width="100%",o.style.height="100%",o.style.border="none",o.style.display="none",o.style.position="fixed",o.style.zIndex="-100",o.style.left="0",o.style.top="0",o.style.transform="translate3d(0, 0, -100)",document.body.appendChild(o),o}function x(){return(x=a()(l.a.mark((function e(n,t){var o,r,p,c,s,u,d,x,w,S,h;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("[poplayer-web-container] init",n),p=Object(v.g)()?"a2g0n":"a2g0o",c=Object(v.g)()?"msite":"pc",Object(g.d)(),s=document.body.getAttribute("data-spm")||"0",Object(v.h)(((o={log_key:"/ae.pc_ctr.statweb_ae_ctr"})["spm-cnt"]=p+"."+s+".poplayer.trigger",o.type="expose",o.positionSign=n.positionSign,o.exp_page=n.positionSign,o.exp_type="poplayer",o.clientType=c,o)),e.next=1,y(n.positionSign,c,t);case 1:if(u=e.sent,d=null==u||null===(r=u.data)||void 0===r?void 0:r.popLayerRuleMap,x=Object.keys(d).reduce((function(e,n){var t;return i()({},e,((t={})[n]=JSON.parse(d[n]),t))}),{}),w=Object(g.b)(x),Object(g.a)({type:"add",payload:w}),S=new v.a(w,x),(h=S.urlWhiteList().fatigue().priority().popType().layer().getPopIds()).length){e.next=2;break}return e.abrupt("return");case 2:h.forEach(function(){var e=a()(l.a.mark((function e(t){var o,i,r,a,u,d,y,g,w,S,h,k,O,j,T,M,U,C,L,R,I,P,B,J,A,N,W,E;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S=(null===(o=x[t])||void 0===o||null===(i=o.params)||void 0===i?void 0:i.extGcpOutputPageUrl)||(null===(r=x[t])||void 0===r||null===(a=r.params)||void 0===a?void 0:a.url)||"",h=null===(u=x[t])||void 0===u||null===(d=u.params)||void 0===d?void 0:d.jsComboUrl,k=null===(y=x[t])||void 0===y?void 0:y.type,O=null===(g=x[t])||void 0===g||null===(w=g.params)||void 0===w?void 0:w.type,"placeholder"===k&&"emptyContent"===O&&Object(v.h)(((M={log_key:"/ae.pc_ctr.statweb_ae_ctr"})["spm-cnt"]=p+"."+s+".poplayer.openurl",M.type="expose",M.positionSign=n.positionSign,M.houyiTrack=Object(v.i)(null===(j=x[t])||void 0===j||null===(T=j.params)||void 0===T?void 0:T.track),M.exp_page=S,M.exp_type="poplayer",M.clientType=c,M)),!S||!m()){e.next=2;break}if(Object(v.h)(((L={log_key:"/ae.pc_ctr.statweb_ae_ctr"})["spm-cnt"]=p+"."+s+".poplayer.openurl",L.type="expose",L.positionSign=n.positionSign,L.houyiTrack=Object(v.i)(null===(U=x[t])||void 0===U||null===(C=U.params)||void 0===C?void 0:C.track),L.exp_page=S,L.exp_type="poplayer",L.clientType=c,L)),"poplayer-campaign-pc",!h||"poplayer-campaign-pc"===n.positionSign){e.next=1;break}return Object(f.renderModuleAndBindMessage)({positionSign:n.positionSign,popInfo:x[t],track:null===(B=x[t])||void 0===B||null===(J=B.params)||void 0===J?void 0:J.track,parentSpmB:s}),e.abrupt("return");case 1:A=_.c.prod,N=Object(v.b)(A,{parentSpmB:s,jsUrl:encodeURIComponent(Object(v.c)(h))}),W=b(N,t,n.positionSign),(E=W.contentWindow)&&(E.__poplayer_init_data={popInfo:x[t],positionSign:n.positionSign,parentSpmB:s,uuid:t,isSupportWebp:m()}),W.onerror=function(e){console.log(e)},Object(v.d)(t,W,null===(R=x[t])||void 0===R||null===(I=R.params)||void 0===I?void 0:I.track,A,n.positionSign,s,!1,null===(P=x[t])||void 0===P?void 0:P.uuid);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n.default=function(e,n){return x.apply(this,arguments)}}}]);